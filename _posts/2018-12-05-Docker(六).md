---
layout: post
date:       2018-12-05 13:00:00
category: Docker
tags:
    - Docker
---

## Docker Compose

## 文档

[Docker Compose](http://www.dockerinfo.net/docker-compose-%E9%A1%B9%E7%9B%AE) 是 Docker 官方编排项目之一，负责快速在集群中部署分布式应用。

## 案例

以下是一个通过nginx 反向代理的node项目的docker-compose.yml

参考： [yaml](http://www.ruanyifeng.com/blog/2016/07/yaml.html) [docker-compose](https://blog.csdn.net/pushiqiang/article/details/78682323)

```docker-compose.yml
version: "3"
services:
	redis:
		restart: always
		image: redis:3.2.11
		container_name: redis
		volumes:
			- /etc/localtime:/etc/localtime:ro
		network:
			- backend
	
	mysql:
		restart: always
		image: mysql:5.7.19
		container_name: mysql
		volumes:
			- /etc/localtime:/etc/localtime:ro
			- /var/project/db/mysql:/var/lib/mysql
			- /var/project/data/mysql:/docker-entrypoint-init.d
		enviroment:
			MYSQL_ROOT_PASSWORD: root_password
			MYSQL_DATABASE: project
			MYSQL_USER: user
			MYSQL_PASSWORD: password
		network:
			- backend
	
	nginx:
		restart: always
		image: nginx:1.12.1
		container_name: nginx
		volumes:
			- /etc/localtime:/etc/localtime:ro
			- /var/project/nginx:/etc/nginx:ro
			- /var/project/logs/nginx:/var/log/nginx:ro
			- /var/project/upload:/upload
			- /var/project/statis:/static
		network:
			- backend
	
		ports:
			- "80:80"
	
	web:
		restart: always
		image: node:8.12
		container_name: project
		command: npm start
		volumes:
			- /etc/localtime:/etc/localtime:ro
			- /var/project/server:/app
			- /var/project/upload:/upload
			- /var/project/logs/server:/logs
		working_dir: /app
		depends_on:
			- redis
			- mysql
		networks:
			- backend

networks:
	pmo
	
	
	
```

